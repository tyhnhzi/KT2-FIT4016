@page
@model PickleballClub.Pages.Members.DetailsModel

@{
    ViewData["Title"] = "Hồ sơ Hội viên";
}

<div class="glass-card mt-4 fade-in-up">
    <div class="text-center mb-5">
        <h2 class="font-weight-bold mb-2">Hồ sơ Hội viên</h2>
        <div class="text-white-50">@Model.Member.FullName</div>
    </div>

    <div class="row justify-content-center">
        <!-- Info Card -->
        <div class="col-md-5 mb-4">
            <div class="glass-card h-100" style="background: rgba(255, 255, 255, 0.05);">
                <h4 class="text-info mb-4 border-bottom border-light border-opacity-25 pb-2">
                    <i class="bi bi-person-badge me-2"></i>Thông tin cá nhân
                </h4>
                
                <div class="mb-3">
                    <label class="text-white-50 small text-uppercase">Họ và tên</label>
                    <div class="fs-5 fw-bold">@Model.Member.FullName</div>
                </div>

                <div class="mb-3">
                    <label class="text-white-50 small text-uppercase">Email</label>
                    <div class="text-white">@(string.IsNullOrEmpty(Model.Email) ? "Chưa cập nhật" : Model.Email)</div>
                </div>

                <div class="mb-3">
                    <label class="text-white-50 small text-uppercase">Số điện thoại</label>
                    <div>@Model.Member.PhoneNumber</div>
                </div>

                <div class="mb-3">
                    <label class="text-white-50 small text-uppercase">Ngày sinh</label>
                    <div>@Model.Member.DOB.ToString("dd/MM/yyyy")</div>
                </div>

                <div class="mb-3">
                    <label class="text-white-50 small text-uppercase">Ngày tham gia</label>
                    <div>@Model.Member.JoinDate.ToString("dd/MM/yyyy")</div>
                </div>
            </div>
        </div>

        <!-- Stats Card -->
        <div class="col-md-5 mb-4">
             <div class="glass-card h-100" style="background: rgba(255, 255, 255, 0.05);">
                <h4 class="text-warning mb-4 border-bottom border-light border-opacity-25 pb-2">
                    <i class="bi bi-bar-chart-fill me-2"></i>Thống kê & Xếp hạng
                </h4>

                <div class="mb-4 text-center">
                    <label class="text-white-50 small text-uppercase mb-2">DUPR Rating</label>
                    <div class="display-4 fw-bold text-warning" style="text-shadow: 0 0 20px rgba(255, 193, 7, 0.5);">
                        @Model.Member.RankLevel.ToString("0.0")
                    </div>
                     <div class="mt-2">
                        @if (Model.Member.RankLevel >= 5.0)
                        {
                            <span class="badge badge-pro px-3 py-2">PRO PLAYER</span>
                        }
                        else if (Model.Member.RankLevel < 2.0)
                        {
                            <span class="badge badge-newbie px-3 py-2">NEWBIE</span>
                        }
                        else
                        {
                            <span class="badge bg-info bg-opacity-25 text-info border border-info border-opacity-25 px-3 py-2">INTERMEDIATE</span>
                        }
                    </div>
                </div>

                <div class="row text-center mt-4">
                    <div class="col-4">
                        <div class="fs-4 fw-bold">@Model.Member.TotalMatches</div>
                        <div class="small text-white-50">Trận</div>
                    </div>
                    <div class="col-4 border-start border-end border-light border-opacity-10">
                        <div class="fs-4 fw-bold text-success">@Model.Member.WinMatches</div>
                        <div class="small text-white-50">Thắng</div>
                    </div>
                    <div class="col-4">
                        @{
                            double winRate = Model.Member.TotalMatches > 0 
                                ? (double)Model.Member.WinMatches / Model.Member.TotalMatches * 100 
                                : 0;
                        }
                        <div class="fs-4 fw-bold text-info">@winRate.ToString("0")%</div>
                        <div class="small text-white-50">Tỉ lệ thắng</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="text-center mt-4">
        <a asp-page="./Index" class="btn btn-outline-light px-4">
            <i class="bi bi-arrow-left me-2"></i>Quay lại danh sách
        </a>
    </div>
</div>

@section Scripts {
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
}
